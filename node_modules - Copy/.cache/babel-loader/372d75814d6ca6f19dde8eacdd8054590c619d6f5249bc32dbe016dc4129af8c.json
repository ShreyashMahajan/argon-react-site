{"ast":null,"code":"import _regeneratorRuntime from \"C:/Shreyash/Projects/Coupon site/argon-dashboard-react-master/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"C:/Shreyash/Projects/Coupon site/argon-dashboard-react-master/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport _slicedToArray from \"C:/Shreyash/Projects/Coupon site/argon-dashboard-react-master/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nvar _jsxFileName = \"C:\\\\Shreyash\\\\Projects\\\\Coupon site\\\\argon-dashboard-react-master\\\\src\\\\components\\\\QrUploader\\\\qrCodeUploader.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\n\n// import \"./App.css\";\n\nimport { scanFile } from \"@openhealthnz-credentials/pdf-image-qr-scanner\";\nimport ImageUploader from \"./qrUploader\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction QrCodeUploader() {\n  _s();\n  var _useState = useState(\"\"),\n    _useState2 = _slicedToArray(_useState, 2),\n    resultText = _useState2[0],\n    setResultText = _useState2[1];\n  console.log('resultText', resultText);\n  var _useState3 = useState(false),\n    _useState4 = _slicedToArray(_useState3, 2),\n    isFileError = _useState4[0],\n    setIsFileError = _useState4[1];\n  console.log('isFileError', isFileError);\n  useEffect(function () {\n    console.log('resultText', resultText);\n  }, [resultText]);\n  function processFile(_x) {\n    return _processFile.apply(this, arguments);\n  }\n  function _processFile() {\n    _processFile = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(selectedFile) {\n      var qrCode;\n      return _regeneratorRuntime().wrap(function _callee$(_context) {\n        while (1) switch (_context.prev = _context.next) {\n          case 0:\n            setResultText(\"\");\n            _context.prev = 1;\n            _context.next = 4;\n            return scanFile(selectedFile);\n          case 4:\n            qrCode = _context.sent;\n            console.log('qrCode', qrCode);\n            if (qrCode === null) {\n              setIsFileError(true);\n            } else {\n              setIsFileError(false);\n            }\n            // It returns null if no QR code is found\n            setResultText(qrCode || \"No QR code found\");\n            _context.next = 13;\n            break;\n          case 10:\n            _context.prev = 10;\n            _context.t0 = _context[\"catch\"](1);\n            // Example Error Handling\n            if ((_context.t0 === null || _context.t0 === void 0 ? void 0 : _context.t0.name) === \"InvalidPDFException\") {\n              setResultText(\"Invalid PDF\");\n            } else if (_context.t0 instanceof Event) {\n              setResultText(\"Invalid Image\");\n            } else {\n              console.log(_context.t0);\n              setResultText(\"Unknown error\");\n            }\n          case 13:\n          case \"end\":\n            return _context.stop();\n        }\n      }, _callee, null, [[1, 10]]);\n    }));\n    return _processFile.apply(this, arguments);\n  }\n  var onHandleError = function onHandleError(err) {\n    setIsFileError(true);\n    setResultText(err.error);\n  };\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(ImageUploader, {\n      onFileSelectError: onHandleError,\n      onFileSelectSuccess: function onFileSelectSuccess(file) {\n        processFile(file);\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"text-yellow\",\n      children: resultText\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 4\n    }, this)]\n  }, void 0, true);\n}\n_s(QrCodeUploader, \"qiYpDInZJTZA4i3DnIb4EFR1JLc=\");\n_c = QrCodeUploader;\nexport default QrCodeUploader;\nvar _c;\n$RefreshReg$(_c, \"QrCodeUploader\");","map":{"version":3,"names":["React","useState","useEffect","scanFile","ImageUploader","jsxDEV","_jsxDEV","Fragment","_Fragment","QrCodeUploader","_s","_useState","_useState2","_slicedToArray","resultText","setResultText","console","log","_useState3","_useState4","isFileError","setIsFileError","processFile","_x","_processFile","apply","arguments","_asyncToGenerator","_regeneratorRuntime","mark","_callee","selectedFile","qrCode","wrap","_callee$","_context","prev","next","sent","t0","name","Event","stop","onHandleError","err","error","children","onFileSelectError","onFileSelectSuccess","file","fileName","_jsxFileName","lineNumber","columnNumber","className","_c","$RefreshReg$"],"sources":["C:/Shreyash/Projects/Coupon site/argon-dashboard-react-master/src/components/QrUploader/qrCodeUploader.jsx"],"sourcesContent":["import React, {  useState , useEffect} from \"react\";\r\n\r\n// import \"./App.css\";\r\n\r\nimport { scanFile } from \"@openhealthnz-credentials/pdf-image-qr-scanner\";\r\nimport ImageUploader from \"./qrUploader\";\r\n\r\nfunction QrCodeUploader() {\r\n\tconst [resultText, setResultText] = useState(\"\");\r\n\tconsole.log('resultText',resultText);\r\n\r\n\tconst [isFileError, setIsFileError] = useState(false);\r\n\tconsole.log('isFileError',isFileError)\r\n\r\n\tuseEffect(() => {\r\n   console.log('resultText',resultText)\r\n\t} ,[resultText])\r\n\r\n\r\n\tasync function processFile(selectedFile) {\r\n\t\tsetResultText(\"\");\r\n\t\ttry {\r\n\t\t\tconst qrCode = await scanFile(selectedFile);\r\n\t\t\tconsole.log('qrCode',qrCode)\r\n\t\t\tif(qrCode === null){\r\n\t\t\t\tsetIsFileError(true)\r\n\t\t\t}else {\r\n\t\t\t\tsetIsFileError(false)\r\n\t\t\t}\r\n\t\t\t// It returns null if no QR code is found\r\n\t\t\tsetResultText(qrCode || \"No QR code found\");\r\n\t\t} catch (e) {\r\n\t\t\t// Example Error Handling\r\n\t\t\tif (e?.name === \"InvalidPDFException\") {\r\n\t\t\t\tsetResultText(\"Invalid PDF\");\r\n\t\t\t} else if (e instanceof Event) {\r\n\t\t\t\tsetResultText(\"Invalid Image\");\r\n\t\t\t} else {\r\n\t\t\t\tconsole.log(e);\r\n\t\t\t\tsetResultText(\"Unknown error\");\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tconst onHandleError = (err) => {\r\n        setIsFileError(true);\r\n\t\tsetResultText(err.error)\r\n\t}\r\n\r\n\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<ImageUploader\r\n\t\t\t\tonFileSelectError={\r\n\t\t\t\t\tonHandleError\r\n\t\t\t\t}\r\n\t\t\t\tonFileSelectSuccess={(file) => {\r\n\t\t\t\t\tprocessFile(file);\r\n\t\t\t\t}}\r\n\t\t\t/>\r\n\t\t\t<p className=\"text-yellow\">{resultText}</p>\r\n\t\t</>\r\n\t);\r\n}\r\n\r\nexport default QrCodeUploader;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}