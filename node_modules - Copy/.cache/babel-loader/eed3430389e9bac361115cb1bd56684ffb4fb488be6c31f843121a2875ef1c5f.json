{"ast":null,"code":"import _slicedToArray from \"C:/Shreyash/Projects/Coupon site/argon-dashboard-react-master/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nvar _jsxFileName = \"C:\\\\Shreyash\\\\Projects\\\\Coupon site\\\\argon-dashboard-react-master\\\\src\\\\components\\\\QrUploader\\\\qrUploader.jsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useRef, useState } from \"react\";\nimport { Button, Spinner } from \"reactstrap\";\nimport styled from \"styled-components\";\nimport { fakeQrValidator } from \"./qrCodeHelper\";\n\n/**\r\n * ImageUploader Success callback.\r\n *\r\n * @callback onFileSelectSuccess\r\n * @param {File} file - The image file.\r\n */\n\n/**\r\n * ImageUploader Error callback.\r\n *\r\n * @callback onFileSelectError\r\n * @param {object} error - Error Object.\r\n * @param {string} error.error - Error Message.\r\n */\n\n/**\r\n * ImageUploader\r\n * @param {object} props ImageUploader Props.\r\n * @param {onFileSelectSuccess} props.onFileSelectSuccess Success Handler.\r\n * @param {onFileSelectError} props.onFileSelectError The email of the user.\r\n */\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function ImageUploader(_ref) {\n  _s();\n  var onFileSelectSuccess = _ref.onFileSelectSuccess,\n    onFileSelectError = _ref.onFileSelectError;\n  // MIME Types to allow for upload.\n  var supportedFiles = [\"application/pdf\", \"image/png\", \"image/jpeg\"];\n  // Splitting the end of the string to get the file extension is not the best way to do this.\n  // Will break for MIME's like SVG 'image/svg+xml'.\n  var supportedFileEnds = supportedFiles.map(function (file) {\n    return file.split(\"/\")[1];\n  }).join(\", \");\n  var inputRef = useRef(null);\n  var _useState = useState(\"\"),\n    _useState2 = _slicedToArray(_useState, 2),\n    fileName = _useState2[0],\n    setFileName = _useState2[1];\n  var _useState3 = useState(false),\n    _useState4 = _slicedToArray(_useState3, 2),\n    isFileError = _useState4[0],\n    setIsFileError = _useState4[1];\n  var _useState5 = useState(false),\n    _useState6 = _slicedToArray(_useState5, 2),\n    loading = _useState6[0],\n    setLoading = _useState6[1];\n  console.log('loading', loading);\n  useEffect(function () {\n    if (!isFileError) {\n      setLoading(true);\n      fakeQrValidator('error 1234', true).then(function (response) {\n        setLoading(false);\n      }).catch(function (error) {\n        setLoading(false);\n      });\n    }\n  }, [fileName]);\n\n  /**\r\n   *\r\n   * @param {React.ChangeEvent<HTMLInputElement>} e\r\n   */\n  var handleFileInput = function handleFileInput(e) {\n    // Makes sure it's the correct file type.\n    var file = e.target.files[0];\n    if (supportedFiles.includes(file === null || file === void 0 ? void 0 : file.type)) {\n      setFileName(file.name);\n      onFileSelectSuccess(file);\n      setIsFileError(false);\n    } else {\n      onFileSelectError({\n        error: \"File must be a PDF/Image\"\n      });\n      setIsFileError(true);\n    }\n  };\n  var handleClick = function handleClick() {\n    inputRef.current.click();\n  };\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n      className: \"text-white\",\n      children: [fileName, fileName === \"\" && \"Supports: \".concat(supportedFileEnds)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(Button, {\n      onClick: handleClick,\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        style: {\n          display: \"none\"\n        },\n        type: \"file\",\n        onChange: handleFileInput,\n        accept: supportedFiles.join(\",\"),\n        ref: inputRef\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 5\n      }, this), loading && /*#__PURE__*/_jsxDEV(Spinner, {\n        size: \"sm\",\n        className: \"mr-1\",\n        children: \"Loading...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 6\n      }, this), \"Upload\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 4\n    }, this)]\n  }, void 0, true);\n}\n_s(ImageUploader, \"rKU4Ez55P6YP+WpxM9NJfeznXcs=\");\n_c = ImageUploader;\nvar _c;\n$RefreshReg$(_c, \"ImageUploader\");","map":{"version":3,"names":["React","useEffect","useRef","useState","Button","Spinner","styled","fakeQrValidator","jsxDEV","_jsxDEV","Fragment","_Fragment","ImageUploader","_ref","_s","onFileSelectSuccess","onFileSelectError","supportedFiles","supportedFileEnds","map","file","split","join","inputRef","_useState","_useState2","_slicedToArray","fileName","setFileName","_useState3","_useState4","isFileError","setIsFileError","_useState5","_useState6","loading","setLoading","console","log","then","response","catch","error","handleFileInput","e","target","files","includes","type","name","handleClick","current","click","children","className","concat","_jsxFileName","lineNumber","columnNumber","onClick","style","display","onChange","accept","ref","size","_c","$RefreshReg$"],"sources":["C:/Shreyash/Projects/Coupon site/argon-dashboard-react-master/src/components/QrUploader/qrUploader.jsx"],"sourcesContent":["import React, { useEffect, useRef, useState } from \"react\";\r\nimport { Button , Spinner} from \"reactstrap\";\r\n\r\nimport styled from \"styled-components\";\r\nimport { fakeQrValidator } from \"./qrCodeHelper\";\r\n\r\n\r\n/**\r\n * ImageUploader Success callback.\r\n *\r\n * @callback onFileSelectSuccess\r\n * @param {File} file - The image file.\r\n */\r\n\r\n/**\r\n * ImageUploader Error callback.\r\n *\r\n * @callback onFileSelectError\r\n * @param {object} error - Error Object.\r\n * @param {string} error.error - Error Message.\r\n */\r\n\r\n/**\r\n * ImageUploader\r\n * @param {object} props ImageUploader Props.\r\n * @param {onFileSelectSuccess} props.onFileSelectSuccess Success Handler.\r\n * @param {onFileSelectError} props.onFileSelectError The email of the user.\r\n */\r\nexport default function ImageUploader({ onFileSelectSuccess, onFileSelectError }) {\r\n\t// MIME Types to allow for upload.\r\n\tconst supportedFiles = [\"application/pdf\", \"image/png\", \"image/jpeg\"];\r\n\t// Splitting the end of the string to get the file extension is not the best way to do this.\r\n\t// Will break for MIME's like SVG 'image/svg+xml'.\r\n\tconst supportedFileEnds = supportedFiles.map((file) => file.split(\"/\")[1]).join(\", \");\r\n\r\n    const inputRef = useRef(null)\r\n\r\n\tconst [fileName, setFileName] = useState(\"\");\r\n\tconst [isFileError, setIsFileError] = useState(false);\r\n\tconst  [loading, setLoading] = useState(false)\r\n\tconsole.log('loading',loading)\r\n    \r\n\tuseEffect(() => {\r\n\t\tif(!isFileError){\r\n\t\t\tsetLoading(true)\r\n      fakeQrValidator('error 1234', true).then( response => {\r\n\t\tsetLoading(false)\r\n\t  } ).catch( (error) => {\r\n\t    setLoading(false)\r\n\t  } )\r\n\t\t}\r\n\t} ,[fileName])\r\n\r\n\t\r\n\r\n\t/**\r\n\t *\r\n\t * @param {React.ChangeEvent<HTMLInputElement>} e\r\n\t */\r\n\tconst handleFileInput = (e) => {\r\n\t\t// Makes sure it's the correct file type.\r\n\t\tconst file = e.target.files[0];\r\n\t\tif (supportedFiles.includes(file?.type)) {\r\n\t\t\tsetFileName(file.name);\r\n\t\t\tonFileSelectSuccess(file);\r\n\t\t\tsetIsFileError(false)\r\n\t\t} else {\r\n\t\t\tonFileSelectError({ error: \"File must be a PDF/Image\" });\r\n\t\t\tsetIsFileError(true)\r\n\t\t}\r\n\t};\r\n\r\n    const handleClick = () => {\r\n        inputRef.current.click();\r\n    }\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<h4 className=\"text-white\">\r\n\t\t\t\t{fileName}\r\n\t\t\t\t{fileName === \"\" && `Supports: ${supportedFileEnds}`}\r\n\t\t\t</h4>\r\n\r\n\t\t\t<Button onClick={handleClick}>\r\n\t\t\t\t<input\r\n\t\t\t\t\tstyle={{ display: \"none\" }}\r\n\t\t\t\t\ttype=\"file\"\r\n\t\t\t\t\tonChange={handleFileInput}\r\n\t\t\t\t\taccept={supportedFiles.join(\",\")}\r\n                    ref={inputRef}\r\n\t\t\t\t/>\r\n\t\t\t\t {\r\n\t\t\t\t\tloading && \r\n\t\t\t\t\t<Spinner size=\"sm\" className=\"mr-1\">\r\n                  Loading...\r\n                  </Spinner>\r\n\t\t\t\t }\r\n\t\t\t\t Upload\r\n\t\t\t\t\r\n                </Button>\r\n\t\t</>\r\n\t);\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}